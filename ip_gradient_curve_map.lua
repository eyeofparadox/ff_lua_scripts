-- gradient curve mapfunction prepare()	sx,sy = get_slider_input(START_X), get_slider_input(START_Y)	ex,ey = get_slider_input(END_X), get_slider_input(END_Y)	mode = get_intslider_input(TYPE)	pi = math.pi * 2end;function lerp(a,b,f)	return a + f * (b - a)end;function get_sample(x, y, t)	if mode == 3 then		dx, dy = sx-ex, sy-ey		offset = math.atan(dx,dy)+math.pi		xx,yy = sx + math.sin(t*pi+offset), sy + math.cos(t*pi+offset)		local v = get_sample_grayscale(xx, yy, IMAGE)		return v	else		xx,yy = lerp(sx,ex,t),lerp(sy,ey,t)		local v = get_sample_grayscale(xx, yy, IMAGE)		return v	end;end;